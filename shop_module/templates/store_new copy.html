{% extends 'dashboard.html' %}
{% block field_page %}
{% from "custom_macro.html" import render_field_with_errors, render_field_btn %}


{% extends 'dashboard.html' %}
{% block field_page %}
{% from "custom_macro.html" import render_field_with_errors, render_field_btn %}
<h5 class='text-center'> Register a Store</h5>
<form>
  <script src="https://checkout.flutterwave.com/v3.js"></script>
  <button type="button" onClick="makePayment()">Pay Now</button>
</form>

<script>
  function makePayment() {
    FlutterwaveCheckout({
      public_key: "FLWPUBK_TEST-SANDBOXDEMOKEY-X",
      tx_ref: "hooli-tx-1920bbtyt",
      amount: 54600,
      currency: "NGN",
      country: "NG",
      payment_options: "card, mobilemoneyghana, ussd",
      redirect_url: // specified redirect URL
        "https://callbacks.piedpiper.com/flutterwave.aspx?ismobile=34",
      meta: {
        consumer_id: 23,
        consumer_mac: "92a3-912ba-1192a",
      },
      customer: {
        email: "user@gmail.com",
        phone_number: "08102909304",
        name: "yemi desola",
      },
      callback: function (data) {
        console.log(data);
      },
      onclose: function() {
        // close modal
      },
      customizations: {
        title: "My store",
        description: "Payment for items in cart",
        logo: "https://assets.piedpiper.com/logo.png",
      },
    });
  }
</script>
<form method="POST" enctype="multipart/form-data" action="{{url_for('shop.store_new')}}">
  {{ form.hidden_tag() }}
  <div class="form-group col-12">
    {{ render_field_with_errors(form.name) }}
    {{ render_field_with_errors(form.about) }}
    {{ render_field_with_errors(form.iso_code) }}
    {{ render_field_with_errors(form.logo) }}
  </div>
  <div class="form-group col-12">
    {{ render_field_with_errors(form.account_name) }}
    {{ render_field_with_errors(form.account_num) }}
    {{ render_field_with_errors(form.bank_name) }}
  </div>

  <div class="col text-center">
    {{ render_field_btn(form.submit) }}
  </div>
</form>
{% endblock field_page %}

